---

title: Understat-DB CLI


keywords: fastai
sidebar: home_sidebar

summary: "CLI for creating a soccer database with data from understat.com"
description: "CLI for creating a soccer database with data from understat.com"
nb_path: "nbs/cli.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/cli.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Initialise the app with Typer</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="EnvTyper" class="doc_header"><code>class</code> <code>EnvTyper</code><a href="https://github.com/torvaney/wingback/tree/master/wingback/cli.py#L24" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>EnvTyper</code>(<strong><code>name</code></strong>:<code>Optional</code>[<code>str</code>]=<em><code>&lt;typer.models.DefaultPlaceholder object at 0x124c719e8&gt;</code></em>, <strong><code>invoke_without_command</code></strong>:<code>bool</code>=<em><code>&lt;typer.models.DefaultPlaceholder object at 0x124c85e80&gt;</code></em>, <strong><code>no_args_is_help</code></strong>:<code>Optional</code>[<code>bool</code>]=<em><code>&lt;typer.models.DefaultPlaceholder object at 0x124c900b8&gt;</code></em>, <strong><code>subcommand_metavar</code></strong>:<code>Optional</code>[<code>str</code>]=<em><code>&lt;typer.models.DefaultPlaceholder object at 0x124c900f0&gt;</code></em>, <strong><code>chain</code></strong>:<code>bool</code>=<em><code>&lt;typer.models.DefaultPlaceholder object at 0x124c90128&gt;</code></em>, <strong><code>result_callback</code></strong>:<code>Optional</code>[<code>Callable</code>[<code>Ellipsis</code>, <code>Any</code>]]=<em><code>&lt;typer.models.DefaultPlaceholder object at 0x124c90160&gt;</code></em>, <strong><code>context_settings</code></strong>:<code>Optional</code>[<code>Dict</code>[<code>Any</code>, <code>Any</code>]]=<em><code>&lt;typer.models.DefaultPlaceholder object at 0x124c90198&gt;</code></em>, <strong><code>callback</code></strong>:<code>Optional</code>[<code>Callable</code>[<code>Ellipsis</code>, <code>Any</code>]]=<em><code>&lt;typer.models.DefaultPlaceholder object at 0x124c901d0&gt;</code></em>, <strong><code>help</code></strong>:<code>Optional</code>[<code>str</code>]=<em><code>&lt;typer.models.DefaultPlaceholder object at 0x124c90208&gt;</code></em>, <strong><code>epilog</code></strong>:<code>Optional</code>[<code>str</code>]=<em><code>&lt;typer.models.DefaultPlaceholder object at 0x124c90240&gt;</code></em>, <strong><code>short_help</code></strong>:<code>Optional</code>[<code>str</code>]=<em><code>&lt;typer.models.DefaultPlaceholder object at 0x124c90278&gt;</code></em>, <strong><code>options_metavar</code></strong>:<code>str</code>=<em><code>&lt;typer.models.DefaultPlaceholder object at 0x124c902b0&gt;</code></em>, <strong><code>add_help_option</code></strong>:<code>bool</code>=<em><code>&lt;typer.models.DefaultPlaceholder object at 0x124c902e8&gt;</code></em>, <strong><code>hidden</code></strong>:<code>bool</code>=<em><code>&lt;typer.models.DefaultPlaceholder object at 0x124c90320&gt;</code></em>, <strong><code>deprecated</code></strong>:<code>bool</code>=<em><code>&lt;typer.models.DefaultPlaceholder object at 0x124c90358&gt;</code></em>, <strong><code>add_completion</code></strong>:<code>bool</code>=<em><code>True</code></em>) :: <code>Typer</code></p>
</blockquote>
<p>Just like typer.Typer, except it loads the environment with
<code>dotenv.load_dotenv</code> before executing any command.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Migrate">Migrate<a class="anchor-link" href="#Migrate"> </a></h2><p>Migrating the database</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="migrate" class="doc_header"><code>migrate</code><a href="https://github.com/torvaney/wingback/tree/master/wingback/cli.py#L71" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>migrate</code>(<strong><code>interactive</code></strong>:<code>bool</code>=<em><code>True</code></em>)</p>
</blockquote>
<p>Migrate database to the current schema (as defined in nbs/db.ipynb)</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="dbt-runner">dbt runner<a class="anchor-link" href="#dbt-runner"> </a></h2><p>(Re-)build tables from base data using dbt (data-build-tool)'s (unsupported) python API</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="build_tables" class="doc_header"><code>build_tables</code><a href="https://github.com/torvaney/wingback/tree/master/wingback/cli.py#L92" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>build_tables</code>(<strong><code>args</code></strong>:<code>List</code>[<code>str</code>]=<em><code>&lt;typer.models.OptionInfo object at 0x124c6d9b0&gt;</code></em>)</p>
</blockquote>
<p>Build tables from base data using dbt</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Ingest">Ingest<a class="anchor-link" href="#Ingest"> </a></h2><p>Ingest base understat data and build understat tables from base data</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ingest" class="doc_header"><code>ingest</code><a href="https://github.com/torvaney/wingback/tree/master/wingback/cli.py#L119" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ingest</code>(<strong><code>refresh</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>leagues</code></strong>:<code>List</code>[<code>str</code>]=<em><code>&lt;typer.models.OptionInfo object at 0x124c6da58&gt;</code></em>, <strong><code>seasons</code></strong>:<code>List</code>[<code>int</code>]=<em><code>&lt;typer.models.OptionInfo object at 0x124c6dcc0&gt;</code></em>)</p>
</blockquote>
<p>Ingest match and shot data from Understat.com</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Modelling">Modelling<a class="anchor-link" href="#Modelling"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="resimulate" class="doc_header"><code>resimulate</code><a href="https://github.com/torvaney/wingback/tree/master/wingback/cli.py#L210" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>resimulate</code>(<strong><code>refresh</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>leagues</code></strong>:<code>List</code>[<code>str</code>]=<em><code>&lt;typer.models.OptionInfo object at 0x124c90ef0&gt;</code></em>, <strong><code>seasons</code></strong>:<code>List</code>[<code>int</code>]=<em><code>&lt;typer.models.OptionInfo object at 0x124c90f28&gt;</code></em>)</p>
</blockquote>
<p>Resimulate matches based on individual shot xGs</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>
<p>Finally, make the app executable from the command line</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

